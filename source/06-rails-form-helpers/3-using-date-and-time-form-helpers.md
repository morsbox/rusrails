# Использование хелперов даты и времени

Можно выбрать не использовать хелперы форм, создающие поля ввода даты и времени HTML5, а использовать альтернативные хелперы даты и времени. Эти хелперы даты и времени отличаются от остальных хелперов форм в двух важных аспектах:

* Дата и время не представлены отдельным элементом ввода. Вместо них есть несколько, один на каждый компонент (год, месяц, день и т.д.), и, таким образом, нет одного значения в хэше `params` с вашими датой и временем.
* Другие хелперы используют суффикс `_tag` для обозначения, является ли хелпер скелетным, либо работает на основе объектов модели. Что касается дат и времени, `select_date`, `select_time` и `select_datetime` - это скелетные хелперы, а `date_select`, `time_select` и `datetime_select` - это эквивалентные хелперы объекта модели.

Оба эти семейства хелперов создадут ряд списков выбора для различных компонент (год, месяц, день и т.д.).

### Скелетные хелперы

Семейство хелперов `select_*` принимает как первый аргумент экземпляр Date, Time или DateTime, который используется как текущее выбранное значение. Можете опустить этот параметр в случае, если используется текущая дата. Например

```erb
<%= select_date Date.today, :prefix => :start_date %>
```

выведет (с опущенными для краткости начальными значениями вариантов)

```html
<select id="start_date_year" name="start_date[year]"> ... </select>
<select id="start_date_month" name="start_date[month]"> ... </select>
<select id="start_date_day" name="start_date[day]"> ... </select>
```

Эти элементы ввода выдадут результат в `params[:start_date]`, являющийся хэшем с ключами `:year`, `:month`, `:day`. Чтобы получить фактический объект Time или Date, необходимо извлечь эти значения и передать их в подходящий конструктор, например

```ruby
Date.civil(params[:start_date][:year].to_i, params[:start_date][:month].to_i, params[:start_date][:day].to_i)
```

Опция `:prefix` это ключ, используемый для получения хэша компонентов даты из хэша `params`. Здесь она была установлена как `start_date`, если опущена, то по умолчанию равна `date`.

### Хелперы объекта модели

`select_date` не очень хорошо работает с формами, обновляющими или создающими объекты Active Record, так как Active Record ожидает, что каждый элемент хэша `params` соответствует одному атрибуту.

Хелперы объекта модели для даты и времени возвращает параметры со специальными именами, и когда Active Record видит параметры с такими именами, он знает, что они должны быть скомбинированы с другими параметрами, и передает конструктору подходящее значения для типа столбца. Например:

```erb
<%= date_select :person, :birth_date %>
```

выдаст (с опущенными для краткости начальными значениями вариантов)

```html
<select id="person_birth_date_1i" name="person[birth_date(1i)]"> ... </select>
<select id="person_birth_date_2i" name="person[birth_date(2i)]"> ... </select>
<select id="person_birth_date_3i" name="person[birth_date(3i)]"> ... </select>
```

что приведет к такому результату в хэше `params`

```ruby
{:person => {'birth_date(1i)' => '2008', 'birth_date(2i)' => '11', 'birth_date(3i)' => '22'}}
```

Когда это передастся в `Person.new` (или `update_attributes`), Active Record отметит, что эти параметры должны быть использованы, для конструирования атрибута `birth_date` и использует суффиксную информацию для определения, в каком порядке должен передать эти параметры в функции, такие как `Date.civil`.

### Общие опции

Оба семейства хелперов используют одинаковый базовый набор функций для создания индивидуальных тегов select, таким образом, они оба принимают множество одинаковых опций. В частности, по умолчанию Rails создаст варианты выбора года как текущий год плюс/минус пять лет. Если это неподходящий вариант, опции `:start_year` и `:end_year` переопределяют это. Для получения исчерпывающего перечня доступных опций обратитесь к [документации по API](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html).

Как правило, следует использовать `date_select` при работе с объектами модели и `select_date` в иных случаях, таких как формы поиска, в которых результаты фильтруются по дате.

NOTE: В большинстве случаев встроенные элементы подбора дат неуклюжи в использовании, так как не позволяют пользователю видеть отношения между датой и днями недели.

### Индивидуальные компоненты

Иногда необходимо отобразить лишь одиночный компонент даты, такой как год или месяц. Rails предоставляет ряд хелперов для этого, по одному для каждого компонента `select_year`, `select_month`, `select_day`, `select_hour`, `select_minute`, `select_second`. Эти хелперы достаточно простые. По умолчанию они создадут поле ввода, названное по имени компонента времени (например "year" для `select_year`, "month" для `select_month` и т.д.), хотя это может быть переопределено в опции `:field_name`. Опция `:prefix` работает так же, как работает для `select_date` и `select_time` и имеет такое же значение по умолчанию.

Первый параметр определяет значение даты, которое будет предложено для выбора (соответствующий элемнт может быть извлечен из экземпляра Date, Time или DateTime), либо сразу задается числовым значением. Например

```erb
<%= select_year(2011) %>
<%= select_year(Time.now) %>
```

создаст такой же результат, если сейчас 2011 год, и значение, выбранное пользователем, может быть получено как `params[:date][:year]`.
